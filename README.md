RepoCleaner is a lightweight Python script to remove embedded references from tools like Lovable in your code exports. It scans files for watermarks, badges, and metadata (e.g., "Generated by Lovable", #lovable-badge), cleans them out, and keeps your repo looking original. Supports common file types without breaking binaries.

## Purpose

- **Clean Exports**: Strip tool-specific traces from HTML, JS/TS, CSS, MD, JSON, SVG, YAML, TOML, and config files.
- **Safe Workflow**: Dry-run previews, backups, Git commits, and clones for testing.
- **Fast & Simple**: No dependencies; runs on stdlib. Handles monorepos (40K+ files) in minutes.

Tested on exports—removes 100% of references while preserving code.

## Installation

Download or clone the script: Save `repo_cleaner.py` to your project root.  
Run from repo root: No setup needed—requires Python 3.8+.

## Usage

Run from your project directory. Defaults to current folder (`.`). Help: `python3 repo_cleaner.py --help`.

### 1. Preview (Dry Run)

Scan without changes:

```bash
python3 repo_cleaner.py --dry-run --verbose
```

**Output Example:**

```
Initializing on /your-project...
Scanning for Lovable references...
--- DRY-RUN: 3 references across 1,200 files ---
File README.md: 2 references removed
File package.json: 1 reference removed
...
```

### 2. Full Clean

Basic purge with safety:

```bash
python3 repo_cleaner.py --mutate --commit --bundle --backup --verbose --new-dir clean_fork --eta --log-file purge_log.json
```

- `--mutate`: Adds subtle neutral tweaks (10% chance/file) for natural changes.
- `--commit`: Auto-git add/commit/push with neutral message (e.g., "refactor: cleanup (742)").
- `--bundle`: Zips output as `your-project_clean_1234.zip`.
- `--backup`: Timestamped ZIP of original.
- `--verbose`: Progress every 500 files + per-file details.
- `--new-dir clean_fork`: Cleans into `./clean_fork` (original safe).
- `--eta`: Runtime estimates/summary.
- `--log-file purge_log.json`: JSON export of changes.

**Output Example:**

```
Initializing on /your-project...
Scanning for Lovable references...
✓ Backup: your-project_backup_20251218_143022_4567.zip
  - Progress: 600/1,200 (50.0%) ETA: 0m 15s
✓ Cleaned README.md (2 refs)
  - Hit in README.md (pre: 1,250 chars)
  - Post: 1,205 chars (delta: 45)
...
✓ Committed: refactor: cleanup optimizations (742)
  - Git staged and pushed
✓ Cloned to: clean_fork
✓ Bundled: clean_fork_clean_742.zip
--- COMPLETE: 3 references removed across 1,200 files. Time: 45.2s ---
  - Summary: 1,200 files, 3 matches culled.
Log saved: purge_log.json
```

### 3. Advanced

- **Subfolder**: `--path ./src` (scan `./src` only).
- **Batch**: Use `horde_purge.sh` (chmod +x): `./horde_purge.sh` for multiple folders.
- **Minimal**: `python3 repo_cleaner.py --dry-run --path .` for quick scans.

## Tips

- **Test**: Dry-run on a clone (`git clone . test-clone; cd test-clone`).
- **Undo**: Unzip backup + `git reset --hard HEAD~1`.
- **Speed**: For large repos, the sentinel skips if clean.